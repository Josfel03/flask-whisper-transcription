<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AnÃ¡lisis Automatizado CREA - Chilpancingo</title>
  <link rel="stylesheet" href="./static/css/styles.css" >
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“ AnÃ¡lisis Automatizado de Sentimientos</h1>
      <div class="subtitle">by JFML</div>
    </div>

    <!-- Sistema de pestaÃ±as SPA -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="transcripcion">ğŸ¤ TranscripciÃ³n de Audio</button>
      <button class="tab-btn" data-tab="sentimientos">ğŸ§  AnÃ¡lisis de Sentimientos</button>
      <button class="tab-btn" data-tab="evaluacion">ğŸ“Š EvaluaciÃ³n y MÃ©tricas ML</button>
    </div>

    <!-- Estado del Sistema (comÃºn a todas las pestaÃ±as) -->
    <div class="system-status" id="systemStatus">
      <div class="status-card">
        <div class="status-title">Estado del Sistema</div>
        <div class="status-value" id="systemHealth">Verificando...</div>
      </div>
      <div class="status-card">
        <div class="status-title">Modelo spaCy</div>
        <div class="status-value" id="spacyStatus">Verificando...</div>
      </div>
      <div class="status-card">
        <div class="status-title">Whisper.cpp</div>
        <div class="status-value" id="whisperStatus">Verificando...</div>
      </div>
      <div class="status-card">
        <div class="status-title">Trabajos Activos</div>
        <div class="status-value" id="activeJobs">0</div>
      </div>
    </div>

    <!-- PESTAÃ‘A 1: TRANSCRIPCIÃ“N DE AUDIO -->
    <div class="tab-content" id="tab-transcripcion">
      <div class="section">
        <h2>
          <span class="section-icon">ğŸ¤</span>
          TranscripciÃ³n de Audio
        </h2>
        <div class="file-input-container">
          <input type="file" id="trans_audioFile" class="file-input" accept=".mp3,.wav,.m4a,.ogg,.flac,.aac,.opus" />
          <label for="trans_audioFile" class="file-input-label">
            ğŸµ Seleccionar archivo de audio
          </label>
          <div class="file-info" id="trans_audioFileInfo">
            Formatos soportados: MP3, WAV, M4A, OGG, FLAC, AAC, OPUS (MÃX. 45MB)
          </div>
          <div class="file-input-error" id="trans_audioFileError"></div>
        </div>

        <div class="audio-controls">
          <button class="btn btn-primary" id="trans_btnTranscribir">
            ğŸ¯ Iniciar TranscripciÃ³n
          </button>
          <button class="btn btn-secondary" id="trans_btnClearTrans">
            ğŸ—‘ï¸ Limpiar TranscripciÃ³n
          </button>
          <button class="btn btn-secondary" id="trans_btnListarArchivos">
            ğŸ“‚ Ver Archivos
          </button>
        </div>

        <div class="status-indicator loading" id="trans_loaderAUD">
          <div class="spinner"></div>
          <span id="trans_transcriptionStatus">Procesando audio...</span>
        </div>

        <div class="status-indicator success" id="trans_statusAUD">
          âœ… TranscripciÃ³n completada
        </div>

        <div class="status-indicator error" id="trans_errorAUD">
          âŒ Error en la transcripciÃ³n
        </div>

        <div class="progress-container" id="trans_progressContainer">
          <div class="progress-bar" id="trans_progressBar"></div>
        </div>
        <div class="progress-text" id="trans_progressText"></div>

        <div class="result-container empty" id="trans_resultadoTranscripcion">
          AquÃ­ aparecerÃ¡ la transcripciÃ³n cuando proceses un archivo de audio...
        </div>
      </div>
      <!-- SecciÃ³n Archivos (solo en pestaÃ±a transcripciÃ³n) -->
      <div class="section" id="trans_sectionArchivos">
        <h2>
          <span class="section-icon">ğŸ“</span>
          Archivos de TranscripciÃ³n
        </h2>
        <div class="file-list" id="trans_fileList">
          <div style="padding: 2rem; text-align: center; color: #7f8c8d;">
            Cargando lista de archivos...
          </div>
        </div>
      </div>
    </div>

    <!-- PESTAÃ‘A 2: ANÃLISIS DE SENTIMIENTOS -->
    <div class="tab-content" id="tab-sentimientos" style="display:none;">
      <div class="section">
        <h2>
          <span class="section-icon">ğŸ§ </span>
          AnÃ¡lisis de Sentimientos BERT
        </h2>
        <div class="file-input-container">
          <input type="file" id="sent_csvFile" accept=".csv" />
          <label for="sent_csvFile" class="file-input-label">
            ğŸ“ Seleccionar archivo CSV
          </label>
          <div class="file-info" id="sent_csvFileInfo"></div>
        </div>
        <div class="audio-controls">
          <button class="btn btn-primary" id="sent_btnProcesar">
            ğŸ” Analizar Sentimientos
          </button>
          <button class="btn btn-secondary" id="sent_btnClear">
            ğŸ—‘ï¸ Limpiar Resultados
          </button>
          <button class="btn btn-secondary" id="sent_btnExport" style="display: none;">
            ğŸ’¾ Exportar Resultados
          </button>
        </div>
        <div class="status-indicator loading" id="sent_loader">
          <div class="spinner"></div>
          Analizando archivos...
        </div>
        <div class="status-indicator success" id="sent_status">
          âœ… AnÃ¡lisis completado
        </div>
        <div class="result-container empty" id="sent_resultado">
          AquÃ­ aparecerÃ¡n los resultados del anÃ¡lisis de sentimientos...
        </div>
        <div class="charts-container" id="sent_charts" style="display:none;">
          <canvas id="sent_barChart"></canvas>
          <canvas id="sent_pieChart"></canvas>
        </div>
      </div>
    </div>

    <!-- PESTAÃ‘A 3: EVALUACIÃ“N Y MÃ‰TRICAS ML -->
    <div class="tab-content" id="tab-evaluacion" style="display:none;">
      <div class="section">
        <h2>
          <span class="section-icon">ğŸ“Š</span>
          EvaluaciÃ³n y MÃ©tricas ML
        </h2>
        <div class="audio-controls">
          <button class="btn btn-primary" id="eval_btnCargarMetrics">
            ğŸ“ˆ Cargar MÃ©tricas
          </button>
          <button class="btn btn-secondary" id="eval_btnExportMetrics" style="display: none;">
            ğŸ’¾ Exportar Reporte
          </button>
        </div>
        <div class="status-indicator loading" id="eval_loaderML">
          <div class="spinner"></div>
          Calculando mÃ©tricas...
        </div>
        <div class="status-indicator success" id="eval_statusML">
          âœ… MÃ©tricas generadas
        </div>
        <div class="result-container empty" id="eval_resultadoMetrics">
          AquÃ­ aparecerÃ¡n los resultados de mÃ©tricas y evaluaciones ML...
        </div>
        <div class="charts-container" id="eval_chartsMetrics" style="display:none;">
          <canvas id="eval_confusionMatrix"></canvas>
          <canvas id="eval_rocCurve"></canvas>
          <canvas id="eval_tfidfHeatmap"></canvas>
        </div>
      </div>
    </div>
  </div>
  <script src="./static/js/script.js"></script>
  <script>
    // tabs.js bÃ¡sico
    document.addEventListener('DOMContentLoaded', function() {
      const tabBtns = document.querySelectorAll('.tab-btn');
      const tabContents = {
        transcripcion: document.getElementById('tab-transcripcion'),
        sentimientos: document.getElementById('tab-sentimientos'),
        evaluacion: document.getElementById('tab-evaluacion')
      };
      tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          tabBtns.forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          Object.keys(tabContents).forEach(key => tabContents[key].style.display = 'none');
          tabContents[this.dataset.tab].style.display = '';
        });
      });
      // Mostrar por defecto la pestaÃ±a de transcripciÃ³n
      tabBtns[0].click();
    });
  </script>
</body>
</html>