<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Automated Analysis</title>
  <link rel="stylesheet" href="./static/css/styles.css" >
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“ Automated Sentiment Analysis</h1>
      <div class="subtitle">by JFML</div>
    </div>

    <div class="tabs">
      <button class="tab-btn active" data-tab="transcripcion">ğŸ¤ Audio Transcription</button>
      <button class="tab-btn" data-tab="sentimientos">ğŸ§  Sentiment Analysis</button>
      <button class="tab-btn" data-tab="evaluacion">ğŸ“Š ML Evaluation & Metrics</button>
    </div>

    <div class="system-status" id="systemStatus">
      <div class="status-card">
        <div class="status-title">System Status</div>
        <div class="status-value" id="systemHealth">Checking...</div>
      </div>
      <div class="status-card">
        <div class="status-title">spaCy Model</div>
        <div class="status-value" id="spacyStatus">Checking...</div>
      </div>
      <div class="status-card">
        <div class="status-title">Whisper.cpp</div>
        <div class="status-value" id="whisperStatus">Checking...</div>
      </div>
      <div class="status-card">
        <div class="status-title">Active Jobs</div>
        <div class="status-value" id="activeJobs">0</div>
      </div>
    </div>

    <div class="tab-content" id="tab-transcripcion">
      <div class="section">
        <h2>
          <span class="section-icon">ğŸ¤</span>
          Audio Transcription
        </h2>
        <div class="file-input-container">
          <input type="file" id="trans_audioFile" class="file-input" accept=".mp3,.wav,.m4a,.ogg,.flac,.aac,.opus" />
          <label for="trans_audioFile" class="file-input-label">
            ğŸµ Select audio file
          </label>
          <div class="file-info" id="trans_audioFileInfo">
            Supported formats: MP3, WAV, M4A, OGG, FLAC, AAC, OPUS (MAX. 45MB)
          </div>
          <div class="file-input-error" id="trans_audioFileError"></div>
        </div>

        <div class="audio-controls">
          <button class="btn btn-primary" id="trans_btnTranscribir">
            ğŸ¯ Start Transcription
          </button>
          <button class="btn btn-secondary" id="trans_btnClearTrans">
            ğŸ—‘ï¸ Clear Transcription
          </button>
          <button class="btn btn-secondary" id="trans_btnListarArchivos">
            ğŸ“‚ View Files
          </button>
        </div>

        <div class="status-indicator loading" id="trans_loaderAUD">
          <div class="spinner"></div>
          <span id="trans_transcriptionStatus">Processing audio...</span>
        </div>

        <div class="status-indicator success" id="trans_statusAUD">
          âœ… Transcription complete
        </div>

        <div class="status-indicator error" id="trans_errorAUD">
          âŒ Error in transcription
        </div>

        <div class="progress-container" id="trans_progressContainer">
          <div class="progress-bar" id="trans_progressBar"></div>
        </div>
        <div class="progress-text" id="trans_progressText"></div>

        <div class="result-container empty" id="trans_resultadoTranscripcion">
          The transcription will appear here once you process an audio file...
        </div>
      </div>
      <div class="section" id="trans_sectionArchivos">
        <h2>
          <span class="section-icon">ğŸ“</span>
          Transcription Files
        </h2>
        <div class="file-list" id="trans_fileList">
          <div style="padding: 2rem; text-align: center; color: #7f8c8d;">
            Loading file list...
          </div>
        </div>
      </div>
    </div>

  <div class="tab-content" id="tab-sentimientos" style="display:none;">
  <div class="section">
    <h2>
      <span class="section-icon">ğŸ§ </span>
      BERT Sentiment Analysis
    </h2>
    <div class="file-input-container">
      <input type="file" id="sent_csvFile" accept=".csv" />
      <label for="sent_csvFile" class="file-input-label">
        ğŸ“ Select CSV file
      </label>
      <div class="file-info" id="sent_csvFileInfo"></div>
    </div>
    <div class="audio-controls">
      <button class="btn btn-primary" id="sent_btnProcesar">
        ğŸ” Analyze Sentiments
      </button>
      <button class="btn btn-secondary" id="sent_btnClear">
        ğŸ—‘ï¸ Clear Results
      </button>
      <button class="btn btn-secondary" id="sent_btnExport" style="display: none;">
        ğŸ’¾ Export Results
      </button>
      <button class="btn btn-secondary" onclick="listarSentimientos()">
        ğŸ“‚ View CSV Files
      </button>
    </div>
    <div class="status-indicator loading" id="sent_loader">
      <div class="spinner"></div>
      Analyzing files...
    </div>
    <div class="status-indicator success" id="sent_status">
      âœ… Analysis complete
    </div>
    <div class="result-container empty" id="sent_resultado">
      The sentiment analysis results will appear here...
    </div>
    <div class="charts-container" id="sent_charts" style="display:none;">
      <canvas id="sent_barChart"></canvas>
      <canvas id="sent_pieChart"></canvas>
    </div>
  </div>
  <div class="section" id="sent_sectionArchivos">
    <h2>
      <span class="section-icon">ğŸ“</span>
      CSV Result Files
    </h2>
    <div class="file-list" id="sent_listadoArchivos">
      <div style="padding: 2rem; text-align: center; color: #7f8c8d;">
        Loading file list...
      </div>
    </div>
  </div>
</div>
    <div class="tab-content" id="tab-evaluacion" style="display:none;">
  <div class="section">
    <h2>
      <span class="section-icon">ğŸ“Š</span>
      ML Evaluation & Metrics
    </h2>
    <div class="file-input-container">
      <input type="file" id="eval_csvFile" accept=".csv" />
      <label for="eval_csvFile" class="file-input-label">
        ğŸ“ Select metrics CSV file
      </label>
      <div class="file-info" id="eval_csvFileInfo"></div>
    </div>
    <div class="audio-controls">
      <button class="btn btn-primary" id="eval_btnCargarMetrics">
        ğŸ“ˆ Load Metrics
      </button>
    </div>
    <div class="status-indicator loading" id="eval_loaderML">
      <div class="spinner"></div>
      Calculating metrics...
    </div>
    <div class="status-indicator success" id="eval_statusML">
      âœ… Metrics generated
    </div>
    <div class="result-container empty" id="eval_resultadoMetrics">
      ML metrics and evaluation results will appear here...
    </div>
    <div class="charts-container" id="eval_chartsMetrics" style="display:none;">
      <canvas id="eval_confusionMatrix"></canvas>
    </div>
  </div>
</div>
  <script src="./static/js/script.js"></script>
  <script>
    // basic tabs.js
    document.addEventListener('DOMContentLoaded', function() {
      const tabBtns = document.querySelectorAll('.tab-btn');
      const tabContents = {
        transcripcion: document.getElementById('tab-transcripcion'),
        sentimientos: document.getElementById('tab-sentimientos'),
        evaluacion: document.getElementById('tab-evaluacion')
      };
      tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          tabBtns.forEach(b => b.classList.remove('active'));
          this.classList.add('active');
          // ... (rest of JS logic is unchanged)
        });
      });
    });
  </script>
</body>
</html>